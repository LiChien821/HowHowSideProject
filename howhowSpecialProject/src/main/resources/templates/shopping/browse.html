<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">

<head>
<meta http-equiv="Content-Type" content="text/html" ; charset="UTF-8">
<title>howhow學</title>
		<!-- <link rel="stylesheet" href="../static/css/index.css" /> -->

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
			integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
			crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
			integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
			crossorigin="anonymous"></script>



<link rel="stylesheet" th:href="@{/shopping/css/font-awesome.min.css}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<link rel="stylesheet" th:href="@{/shopping/css/elegant-fonts.css}">
<link rel="stylesheet" th:href="@{/shopping/css/themify-icons.css}">
<link rel="stylesheet" th:href="@{/css/index.css}"></link>
<link rel="stylesheet" th:href="@{/shopping/css/swiper.min.css}">

<link rel="stylesheet" th:href="@{/shopping/style.css}">

<link rel="stylesheet" th:href="@{/css/index.css}"/>

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">

<link rel="stylesheet"
	th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css}">


<link rel="stylesheet" th:href="@{/css/universal-navbar.css}"></link>


<!-- <script -->
<!-- 	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" -->
<!-- 	integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" -->
<!-- 	crossorigin="anonymous"></script> -->




</head>
<body>

	<div id="browse">
	
	<nav th:fragment="universal-navbar" class="navbar navbar-expand-lg navbar-light bg-light p-0 m-0"
        style="height: 130px; background-color:#E2C652;">
        <div class="container-fluid px-3 header">
            <a class="navbar-brand" href="/">
                <img class="icon" th:src="@{/image/unnamed.png}" alt="" />
            </a>



			<div class="nav-item dropdown navbar-dropdown me-2 py-2 ms-5 d-flex align-items-center">
                <div id="category" role="button" aria-expanded="false">
                    <a class="nav-link" href="/courses">
                        <small><span>| 類別 |</span></small>
                    </a>
                </div>
                <div class="mt-5">
                    <div class="dropdown-menu navbar-dropdown-menu text-center left-dropdown-menu shadow" aria-labelledby="category"
                        style="width: 200px;background-color:#f3f7f7;border-radius: 15px;">

                        <div herf="#" class="dropdown-item  navbar-category-item" v-for="cate in categories"
                            @click="goToCoursePageByCategoryId(cate.cId)">
                            {{ cate.cItemName }}
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="nav-item dropdown me-2 py-2 ms-5">
                <div class="dropdown-toggle" href="#" id="category" role="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <small><span>| 類別 |</span></small>
                </div>
                <ul class="dropdown-menu" aria-labelledby="category">
                    <li class="dropdown-submenu dropdown-item" v-for="category in categories">
                        <div class="d-flex justify-content-between" @click="searchByCategory(category.cId)">
                            <small><span>{{ category.cItemName }}</span></small>
                            <i class="fa fa-chevron-right"></i>
                        </div>
                    </li>
                </ul>
            </div> -->

            <div class="ms-3 navbar-search d-flex align-items-center justify-content-center">

                <input type="search" placeholder="搜尋任何事物..." v-model="search" aria-describedby="button-addon4"
                    @keyup.enter="goSearch(search)" class="navbar-search-input rounded-pill border-0 px-3">
                <div class="">
                    <button id="button-addon4" type="button" class="border-0 rounded-pill"
                        @click="goSearch(search)" style="height: 40px; background-color:#E2C652;"><i
                            class="fa fa-search"></i></button>
                </div>
            </div>

            <div class="collapse navbar-collapse d-flex justify-content-end" id="navbarNav">
                <div class="navbar-nav">
                    <div class="nav-item mx-2 py-2 d-flex align-items-center">

						<div sec:authorize="hasAuthority('Student')" id="teacher" role="button" aria-expanded="false">
                            <a class="nav-link" th:href="@{#}" @click.prevent="sendTeacherApply()">
                                <small><span>申請講師</span></small>
                            </a>
                            <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
                                <div id="liveToast" class="toast hide" role="alert" aria-live="assertive"
                                    aria-atomic="true">
                                    <div class="toast-header">
                                        <strong class="me-auto">公告</strong>
                                        <button type="button" class="btn-close" data-bs-dismiss="toast"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="toast-body">
                                        講師申請已送出，待後台審理，請耐心等候告知...
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div sec:authorize="hasAuthority('Teacher')" id="teacher" role="button" aria-expanded="false">
                            <a class="nav-link" href="/teacherPage/page">
                                <small><span>我是講師</span></small>
                            </a>
                        </div>
                        <!-- <div id="teacher" role="button" aria-expanded="false">
                            <a class="nav-link" href="/teacherPage/page">
                                <small><span>講師</span></small>
                            </a>
                        </div> -->
                    </div>

					<div class="nav-item dropdown navbar-dropdown mx-2 py-2 d-flex align-items-center">
                        <div id="my-course" role="button" aria-expanded="false">
                            <a class="nav-link" href="/mycourse">
                                <small><span>我的課程</span></small>
                            </a>
                        </div>
                        <div class="mt-5">
                            <div class="dropdown-toggle" href="#" id="my-course-dropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                <!-- <small><span><i class="fas fa-caret-down"></i></span></small> -->
                            </div>
                            <div class="dropdown-menu navbar-dropdown-menu right-dropdown-menu shadow" aria-labelledby="my-course-dropdown"
                                style="width: 400px; height: 400px;background-color:#f3f7f7;border-radius: 15px;">
                                <div class="px-3 mt-1"><span>最近學習</span></div>
                                <div class="px-3 mt-3" v-if="purchasedCourses == ''">暫無課程</div>
                                <div>
                                    <div style="height: 60px;" v-for="course in purchasedCourses">
                                        <hr class="mb-1 mx-5" color="#6f5499" size="3" />
                                        <a class="d-flex px-3 mb-3 mt-2 navbar-course-item" :href="'/product?id=' + course.courseID"
                                            style="text-decoration:none;">
                                            <div class="flex-shrink-0 m-0 p-0">
                                                <img style="height: 60px; width: 100px;"
                                                    :src="blobSetting + course.courseCover" alt="">
                                            </div>
                                            <div class="flex-grow-1 ms-3 d-block">
                                                <div class="text-wrap " style="height: 36px; width: 250px;">
                                                    <span class="text-wrap" style="font-size: 16px;">{{
                                                        course.courseName
                                                        }}</span>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="d-grid px-3 mt-4 align-items-end">
                                    <button class="btn btn-secondary" type="button"><a class="nav-btn-link"
                                            href="/mycourse">前往我的課程</a></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="nav-item dropdown mx-2 py-2 d-flex align-items-center">
                        <div id="my-course" role="button" aria-expanded="false">
                            <a class="nav-link" href="/mycourse">
                                <small><span>我的課程</span></small>
                            </a>
                        </div>
                    </div> -->

                    <div class="nav-item mx-2 py-2">
                        <div id="shopping-cart" role="button" aria-expanded="false">
                            <a class="nav-link" href="/myshop">
                                <i class="fa fa-shopping-cart fa-2x" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>

                    <div class="nav-item mx-2 py-2 " v-if="!isLogged">
                        <div href="" id="navbar-loggin" role="button" aria-expanded="false">
                            <a style="color:#E2C652" class="nav-link" th:href="@{/login}">
                                <input type="button" class="bt2" value="登入"></input>
                            </a>
                        </div>
                    </div>

                    <div class="nav-item mx-2 py-2 " v-if="!isLogged">
                        <div href="" id="navbar-register" role="button" aria-expanded="false">
                            <a th:href="@{/register}" class="nav-link">
                                <input type="button" class="bt1" value="註冊"></input>
                            </a>
                        </div>
                    </div>

					<div class="nav-item mx-2 py-2 navbar-dropdown dropdown d-flex align-items-center " v-if="isLogged">
                        <div href="" id="profile" role="button" aria-expanded="false">
                            <a class="nav-link" href="/home">
                                <i class="fa fa-user-circle fa-2x" aria-hidden="true"></i>
                            </a>
                        </div>
                        <div class="mt-5">
                            <div class="dropdown-toggle" href="#" id="profile" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                <!-- <small><span><i class="fas fa-caret-down"></i></span></small> -->
                            </div>
                            <div class="dropdown-menu navbar-dropdown-menu text-center right-dropdown-menu shadow navbar-profile-item"
                                style="width: 180px; height: 250px;background-color:#f3f7f7;border-radius: 15px;"
                                aria-labelledby="profile">
                                <a class="dropdown-item d-flex align-items-center justify-content-center"
                                    href="/logout">
                                    <i class="fas fa-circle-o-notch fa-lg" aria-hidden="true"></i>
                                    <div class="ms-1">帳號登出</div>
                                </a>
                                <hr class="dropdown-divider">
                                <a class="dropdown-item d-flex align-items-center justify-content-center" href="/editAccount">
                                    <i class="fas fa-cog fa-lg"></i>
                                    <div class="ms-1">帳號設定</div>
                                </a>
                                <a class="dropdown-item d-flex align-items-center justify-content-center" href="#">
                                    <i class="far fa-user fa-lg"></i>
                                    <div class="ms-1">個人檔案</div>
                                </a>
                                <a class="dropdown-item d-flex align-items-center justify-content-center" href="#">
                                    <i class="far fa-bookmark fa-lg"></i>
                                    <div class="ms-1">我的收藏</div>
                                </a>
                                <hr class="dropdown-divider">
                                <a class="dropdown-item d-flex align-items-center justify-content-center" href="#">
                                    <i class="far fa-file fa-lg"></i>
                                    <div class="ms-1">訂單記錄</div>
                                </a>
                                <a class="dropdown-item d-flex align-items-center justify-content-center" href="#">
                                    <i class="fas fa-dollar-sign"></i>
                                    <div class="ms-1">享回饋金</div>
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="nav-item mx-2 py-2 " v-if="isLogged">
                        <div href="" id="profile" role="button" aria-expanded="false">
                            <a class="nav-link" href="/home">
                                <i class="fa fa-user-circle fa-2x" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </nav>
	
			
			<div class="container-fluid" style="background-color:white; height:280px">
				<div class="row" v-if="currentcategoryid!=0">
					<div class="col-2"></div>
					<div class="col-2" style="line-height:120px; font-size:50px; color:orange">{{currentcategoryname}}</div>
					<div class="col-8"></div>
					<div class="col-2"></div>
					<div class="col-6" style="line-height:40px; font-size:25px">{{currentcategorydescription}}</div>
				</div>
				<div class="row" v-else>
					<div class="col-2"></div>
					<div class="col-8" style="line-height:280px; font-size:50px; color:orange">快來加入HowHow一起學習吧!!</div>
				</div>
			</div>
			
			
			
			
			<div class="row"
				style="position: absolute; left: 50%; transform: translate(-50%); border-color: red; width: 1200px;">
				<div class="col-12 col-lg-12">
					<div class="featured-courses courses-wrap">
						<div v-if="courses.empty==true">
							<div style="margin: 20px">目前查無搜尋結果</div>
						</div>

						<div class="classes" style="display: inline"
							v-for="course in courses.content">
							<a class="classbox" v-if="course.coursestatusid==2"
								:href="course.url">
								<div class="top">
									<div class="classpicture"
										v-bind:style="{ backgroundImage:'url('+blobSetting+course.cover+ ')'}"></div>
									<div class="tag" v-if="ccf==true">募資中</div>
									<div class="tag" v-if="ccf==false">上課囉</div>
									<div class="bookbtn"
										style="color: white; background-color: #EB5E00;"
										v-if="favstatus.includes(course.courseid)">
										<i class="fa fa-bookmark"
											style="color: white; background-color: #EB5E00;"
											@click.prevent="removeFavorite(course.courseid)"></i>
									</div>
									<div class="bookbtn" v-else>
										<i class="fa fa-bookmark"
											@click.prevent="addFavorite(course.courseid)"></i>
									</div>
								</div>
								<div class="bottom">
									<h1 class="classtitle">{{course.coursename}}</h1>
									<div class="texts">
										<div class="pricerow">
											<div class="preprice" v-if="ccf==true">
												預購價<span class="orange">NT${{course.discountprice}}</span>
											</div>
											<div class="preprice" v-if="ccf==false">
												售價<span class="orange">NT${{course.discountprice}}</span>
											</div>
											<div class="lastday" v-if="ccf==true">
												剩<span class="orange">20天</span>
											</div>
											<div class="lastday" v-if="ccf==false && course.studentnum>0">
												同學<span class="orange">{{course.studentnum}}位</span>
											</div>
										</div>
										<div class="progressbar" v-if="ccf==true">
											<div class="valuebar"></div>
										</div>
										<div>
											<div
												class="course-ratings flex justify-content-start align-items-center">
												<div v-if="course.ranknum>0">
													<span class="fas fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														v-if="course.rank>=2" class="fas fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														v-else-if="course.rank>=1.5"
														class="fas fa-star-half-alt checked"
														style="width: 12px; padding: 5px"></span> <span v-else
														class="far fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														v-if="course.rank>=3" class="fas fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														v-else-if="course.rank>=2.5"
														class="fas fa-star-half-alt checked"
														style="width: 12px; padding: 5px"></span> <span v-else
														class="far fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														v-if="course.rank>=4" class="fas fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														v-else-if="course.rank>=3.5"
														class="fas fa-star-half-alt checked"
														style="width: 12px; padding: 5px"></span> <span v-else
														class="far fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														v-if="course.rank>=4.8" class="fas fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														v-else-if="course.rank>=4.3"
														class="fas fa-star-half-alt checked"
														style="width: 12px; padding: 5px"></span> <span v-else
														class="far fa-star checked"
														style="width: 12px; padding: 5px"></span> <span
														class="course-ratings-count" style="vertical-align: top;">{{course.ranknum}}則評價</span>
												</div>
												<div v-else>
													<span>暫無評價</span>
												</div>
											</div>
										</div>
										<div class="nowpeople" v-if="ccf==true">
											已募資<span class="orange">16/50人</span>
										</div>
										<div class="gopurchase" v-if="ccf==false">
											<input type="button" class="bt3" value="快去購買" />
										</div>
									</div>
									<div class="orangebar"></div>
								</div>
							</a>
						</div>
						<!-- .row -->
					</div>
					<!-- .featured-courses -->

					<div
						class="pagination flex flex-wrap justify-content-between align-items-center">
						<div class="col-12 col-lg-4 order-2 order-lg-1 mt-3 mt-lg-0">
							<ul
								class="flex flex-wrap align-items-center order-2 order-lg-1 p-0 m-0">
								<li class="page-item" :class="{'disabled':res.first}"><a
									class="page-link" href="#" @click.prevent=previousPage()><i
										class="fa fa-angle-left"></i></a></li>
								<li v-for="page in courses.totalPages" :key="page"
									:class="{'active':pageNo==page}"><a id="page" href="#"
									@click.prevent="changePage(page)">{{page}}</a></li>
								<li class="page-item" :class="{'disabled':res.last}"><a
									class="page-link" href="#" @click.prevent="nextPage()"><i
										class="fa fa-angle-right"></i></a></li>
							</ul>
						</div>

					</div>
					<!-- .pagination -->
				</div>
				<!-- .col -->
			</div>
			<!-- .row -->
		</div>
		<!-- .container -->
		<input id="pageNo" name="pageNo" hidden th:value="${pageNo}" /> <input
			id="userid" name="userid" hidden th:value="${userid}" /> 
			<input id="searching" name="searching" hidden th:value="${searching}" />
			<input id="categorying" name="categorying" hidden th:value="${categorying}" />
	</div>

	<div style="height: 1300px;"></div>
	<div th:insert="universal-footer :: universal-footer"></div>

	<script src="https://unpkg.com/vue@3"></script>
	
	<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>

	<script type="importmap">

	{
  "imports": {
	"vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js",
	"vue-router": "https://cdnjs.cloudflare.com/ajax/libs/vue-router/4.0.0-alpha.12/vue-router.esm.js"
  }
}

</script>


	<script type="module" th:src="@{/js/browse.js}"></script>
	<!-- <script type="module" th:src="@{/js/universal-navbar.js}"></script>
 -->



</body>

</html>