<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">

<head>
	<meta http-equiv="Content-Type" content="text/html" ; charset="UTF-8">
	<title>howhow學</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous"></script>
  	
    <link rel="stylesheet" th:href="@{/shopping/css/font-awesome.min.css}">

    <link rel="stylesheet" th:href="@{/shopping/css/elegant-fonts.css}">

    <link rel="stylesheet" th:href="@{/shopping/css/themify-icons.css}">

    <link rel="stylesheet" th:href="@{/shopping/css/swiper.min.css}">

    <link rel="stylesheet" th:href="@{/shopping/style.css}">
    
    <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css}">
    
</head>
<body>
    <div id="browse">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="breadcrumbs">
                        <ul class="flex flex-wrap align-items-center p-0 m-0">
                            <li><a href="/howhow/"><i class="fa fa-home"></i> Home</a></li>
                            <li>Courses</li>
                        </ul>
                    </div><!-- .breadcrumbs -->
                </div><!-- .col -->
            </div><!-- .row -->
            <div class="row">
            	<div class="col-2">
					<a href="#" @click.prevent="searchAll()">所有課程</a>
				</div>
				<div v-for="category in categories" class="col-1">
					<a href="#" @click.prevent="searchByCategory(category.id)">{{category.name}}</a>
				</div>
			</div>
			<div class="row">
				<div class="col-4" v-if="currentcategoryid==0">
					<input id="search" v-model="search" placeholder="尋找" @keyup.enter="goSearch(search)">
					<button class="px-25" @click="goSearch(search)">搜尋</button>
				</div>
				<div class="col-4" v-if="currentcategoryid!=0">
					{{currentcategoryname}}  -  {{currentcategorydescription}}
				</div>
			</div>
			
            <div class="row">
                <div class="col-12 col-lg-12">
                    <div class="featured-courses courses-wrap">
                        <div class="row mx-m-25">
                        	<div v-if="courses.empty==true">
                        	<div style="margin:20px">目前查無搜尋結果</div>
                        	</div>
                            <div class="col-12 col-md-4 px-25" v-for="course in courses.content">
                                <div class="course-content">
                                    <div v-if="course.coursestatusid==1">
                                        <figure class="course-thumbnail">
                                            <a href="#"><img :src="course.cover" alt=""></a>
                                        </figure><!-- .course-thumbnail -->

                                        <div class="course-content-wrap">

                                            <header class="entry-header">
                                                <h2 class="entry-title"><a :href="course.url">{{course.coursename}}</a>
                                                </h2>
                                                <div class="flex flex-wrap justify-content-between align-items-center">
                                                    <div class="course-author"><a href="#">{{course.creatorname}}</a>
                                                    </div><!-- .course-date -->
                                                    <div class="flex justify-content-end align-items-center">
                                                        <div v-if="favstatus.includes(course.courseid)"><button class="btn btn-success shadow-none far fa-bookmark " style="color:white" @click="removeFavorite(course.courseid)"></button></div>
                                                        <div v-else><button class="btn btn-light shadow-none far fa-bookmark" style="color:green" @click="addFavorite(course.courseid)"></button></div>
                                                    </div>
                                                </div>
                                                
                                            </header><!-- .entry-header -->

                                            <footer
                                                class="entry-footer flex flex-wrap justify-content-between align-items-center">
                                                <div class="course-cost" v-if="course.price>course.discountprice">
                                                    NT${{course.discountprice}} <span
                                                        class="price-drop">{{course.price}}</span>
                                                </div><!-- .course-cost -->
                                                <div class="course-cost" v-else>
                                                    NT${{course.price}}
                                                </div><!-- .course-cost -->
                                                <div class="course-ratings flex justify-content-end align-items-center">
                                                    <div v-if="course.ranknum>0">
                                                        <span class="fas fa-star checked"></span>
                                                        <span v-if="course.rank>=2"class="fas fa-star checked"></span>
                                                        <span v-else-if="course.rank>=1.5" class="fas fa-star-half-alt checked"></span> 
                                                        <span v-else class="far fa-star checked"></span>
                                                        <span v-if="course.rank>=3"class="fas fa-star checked"></span>
                                                        <span v-else-if="course.rank>=2.5" class="fas fa-star-half-alt checked"></span>
                                                        <span v-else class="far fa-star checked"></span>
                                                        <span v-if="course.rank>=4" class="fas fa-star checked"></span>
                                                        <span v-else-if="course.rank>=3.5" class="fas fa-star-half-alt checked"></span>
                                                        <span v-else class="far fa-star checked"></span>
                                                        <span v-if="course.rank>=4.8" class="fas fa-star checked"></span>
                                                        <span v-else-if="course.rank>=4.3" class="fas fa-star-half-alt checked" ></span>
                                                        <span v-else class="far fa-star checked"></span>
                                                        <span class="course-ratings-count">{{course.ranknum}}則評價</span>
                                                    </div>
                                                </div><!-- .course-ratings -->
                                                <div class="course-stunum" v-if="course.studentnum>=5">
                                                    同學{{course.studentnum}}人
                                                </div><!-- .course-cost -->
                                            </footer><!-- .entry-footer -->
                                        </div><!-- .course-content-wrap -->
                                    </div>
                                </div><!-- .course-content -->
                            </div><!-- .col -->
                        </div><!-- .row -->
                    </div><!-- .featured-courses -->

                    <div class="pagination flex flex-wrap justify-content-between align-items-center">
                        <div class="col-12 col-lg-4 order-2 order-lg-1 mt-3 mt-lg-0">
                            <ul class="flex flex-wrap align-items-center order-2 order-lg-1 p-0 m-0">
                            	<li class="page-item" :class="{'disabled':res.first}"><a class="page-link" href="#" @click.prevent=previousPage()><i class="fa fa-angle-left"></i></a></li>
                                <li v-for="page in courses.totalPages" :key="page" :class="{'active':pageNo==page}"><a id="page" href="#" @click.prevent="changePage(page)" >{{page}}</a></li>
                                <li class="page-item" :class="{'disabled':res.last}"><a class="page-link" href="#" @click.prevent="nextPage()"><i class="fa fa-angle-right"></i></a></li>
                            </ul>
                        </div>

                        <div
                            class="col-12 flex justify-content-start justify-content-lg-end col-lg-8 order-1 order-lg-2">
                            <div class="pagination-results flex flex-wrap align-items-center">
                                <p class="m-0">Showing 1–3 of 12 results</p>

                                <form>
                                    <select>
                                        <option>Show: 06</option>
                                        <option>Show: 12</option>
                                        <option>Show: 18</option>
                                        <option>Show: 24</option>
                                    </select>
                                </form>
                            </div><!-- .pagination-results -->
                        </div>
                    </div><!-- .pagination -->
                </div><!-- .col -->
            </div><!-- .row -->
        </div><!-- .container -->
        <input id="pageNo" name="pageNo" hidden th:value="${pageNo}"/>
        <input id="userid" name="userid" hidden th:value="${userid}" />
    </div>
    </footer><!-- .site-footer -->
	
	<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
	
	<script type="importmap">

	{
	  "imports": {
		"vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
	  }
	}
</script>
	
	
<script type="module" th:src="@{/js/browse.js}"></script>


</body>

</html>